(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4295:function(e,t,s){Promise.resolve().then(s.bind(s,7784))},7784:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var o=s(3827),n=s(4090),i=s(9631),a=s(7711),l=s(6959),r=s(5271),c=s(2045),d=s(4435);let h=e=>{let{lightRef:t}=e,{scene:s}=(0,d.L)("/model3.glb"),{camera:n}=(0,c.A)();n.lookAt(s.position);let i=(0,r.vO)(),a=null,l=null;s.traverse(e=>{"front_led_light_strip"===e.name&&(a=e),"rear_led_red_light"===e.name&&(l=e)});let h=a.material,p=l.material;return(0,c.C)(()=>{if(i.offset<.05&&(t.current.position.x=0,t.current.position.y=0,h.color.setScalar(0),h.emissive.setScalar(0),n.position.x=0,n.position.z=-80,n.lookAt(s.position)),i.offset>.05&&i.offset<=.15){let e=(i.offset-.05)/.1;h.color.setScalar(e),h.emissive.setScalar(e)}if(i.offset>.15&&i.offset<=.25){t.current.position.y=1;let e=1-(i.offset-.15)/.1*2;t.current.position.x=e}if(i.offset>.25&&i.offset<=.45){t.current.position.y=1;let e=1-(i.offset-.25)/.2*2;t.current.position.x=e,n.position.x=(i.offset-.25)/.2*100,n.position.z=(i.offset-.25)/.2*80-80,n.lookAt(s.position)}i.offset>.45&&i.offset<=.65&&(n.position.x=100-(i.offset-.45)/.2*100,n.position.z=(i.offset-.45)/.2*80,n.lookAt(s.position)),i.offset>.65&&i.offset<=.75&&(p.emissiveIntensity=2,p.emissive.setRGB(.8,.002,0))}),(0,o.jsx)("primitive",{object:s,scale:.5})};var p=s(6491),m=s.n(p),f=e=>{let{waypoints:t}=e,s=(0,n.useRef)(null),i="ro4l1MQytaafn7PlXWHFu7uz97noxvIwZhti6qlt-_s";return(0,n.useEffect)(()=>{let e=e=>new Promise((t,s)=>{let o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=e,o.onload=()=>t(),o.onerror=e=>s(e),document.head.appendChild(o)}),o=e=>new Promise((t,s)=>{let o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=e,o.onload=()=>t(),o.onerror=e=>s(e),document.head.appendChild(o)}),n=async()=>{try{await o("https://js.api.here.com/v3/3.1/mapsjs-core.js"),await o("https://js.api.here.com/v3/3.1/mapsjs-service.js"),await o("https://js.api.here.com/v3/3.1/mapsjs-mapevents.js"),await o("https://js.api.here.com/v3/3.1/mapsjs-ui.js"),await e("https://js.api.here.com/v3/3.1/mapsjs-ui.css")}catch(e){console.error("Failed to load HERE Maps scripts",e)}},a=()=>{let e=new window.H.service.Platform({apikey:i}).createDefaultLayers(),o=new window.H.Map(s.current,e.vector.normal.map,{zoom:4,center:{lat:39.5,lng:-98.35}});window.addEventListener("resize",()=>o.getViewPort().resize()),new window.H.mapevents.Behavior(new window.H.mapevents.MapEvents(o)),window.H.ui.UI.createDefault(o,e);let n=e=>{let t=new window.H.geo.LineString;e.forEach(e=>{t.pushPoint(e)});let s=new window.H.map.Polyline(t,{style:{lineWidth:4}});o.addObject(s),o.getViewModel().setLookAtData({bounds:s.getBoundingBox()})},a=async()=>{let e=[];for(let s of t){let t=await fetch("https://geocode.search.hereapi.com/v1/geocode?q=".concat(encodeURIComponent("Tesla Supercharger"+s.location+", "+s.country),"&apiKey=").concat(i)),o=await t.json();if(o.items&&o.items.length>0){let t=o.items[0].position;e.push({lat:t.lat,lng:t.lng})}}if(e.length>0){let t=e[0].lat,s=e[0].lat,n=e[0].lng,i=e[0].lng;e.forEach(e=>{t=Math.min(t,e.lat),s=Math.max(s,e.lat),n=Math.min(n,e.lng),i=Math.max(i,e.lng)});let a=new window.H.geo.Rect(t-1,n-1,s+1,i+1);o.getViewModel().setLookAtData({bounds:a})}e.forEach(e=>{let t=new window.H.map.Marker(e);o.addObject(t)}),e.length>1&&n(e)};t.length&&a()};window.H?a():n().then(a)},[t]),(0,o.jsx)("div",{ref:s,style:{height:"500px",width:"100%"}})};let u=()=>{let[e,t]=(0,n.useState)([]);return(0,o.jsxs)("div",{className:"mx-auto h-full w-11/12 overflow-hidden rounded bg-[#222] p-8 drop-shadow-lg",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-3xl font-bold tracking-tight sm:text-4xl",children:"Tesla Supercharger Map Plotter"}),(0,o.jsx)("p",{className:"mt-4",children:"Using the Tesla App -> Menu -> Charging -> History -> Export -> CSV"})]}),(0,o.jsx)("div",{className:"col-span-full",children:(0,o.jsxs)("div",{className:"mt-2 flex items-center gap-x-3",children:[(0,o.jsx)("input",{type:"file",id:"file-upload",className:"hidden",onChange:e=>{let s=e.target.files;s&&s[0]&&m().parse(s[0],{header:!0,complete:e=>{t(e.data.map(e=>({location:e.SiteLocationName,country:e.Country})).filter(e=>e.location&&e.country))}})}}),(0,o.jsxs)("label",{htmlFor:"file-upload",className:"rounded-md bg-white px-2.5 py-1.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"inline-block h-6 w-6",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"})}),"Upload CSV"]}),(0,o.jsxs)("a",{href:"Tesla_Charging_History.csv",download:"Tesla_Charging_History.csv",className:"rounded-md bg-white px-2.5 py-1.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"inline-block h-6 w-6",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})}),"Download Sample"]})]})}),(0,o.jsx)("div",{className:"mt-8",children:e.length>0&&(0,o.jsx)(f,{waypoints:e})})]})};function w(){let{progress:e}=(0,a.S)();return(0,o.jsxs)(l.V,{center:!0,children:[e," % loaded"]})}function g(){let e=(0,n.useRef)(null);return(0,o.jsx)("main",{className:"h-screen w-screen",children:(0,o.jsx)(i.Xz,{camera:{position:[0,25,-80],fov:75},children:(0,o.jsx)(n.Suspense,{fallback:(0,o.jsx)(w,{}),children:(0,o.jsxs)(r.Fq,{pages:4,damping:.5,distance:.5,children:[(0,o.jsx)("ambientLight",{intensity:1}),(0,o.jsx)("directionalLight",{ref:e,position:[0,1,0],intensity:10}),(0,o.jsx)(h,{lightRef:e}),(0,o.jsx)(r.Xs,{html:!0,children:(0,o.jsx)("div",{className:"absolute top-[300vh] h-dvh w-dvw p-8",children:(0,o.jsx)(u,{})})})]})})})})}}},function(e){e.O(0,[689,800,911,971,69,744],function(){return e(e.s=4295)}),_N_E=e.O()}]);